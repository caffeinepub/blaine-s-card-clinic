{
  "kind": "build_request",
  "title": "Bootstrap current Internet Identity as an admin",
  "priority": "normal",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "Update the Motoko backend to automatically grant the caller administrative permissions the first time they authenticate, so the user’s current Internet Identity can access the admin dashboard without any manual principal entry.",
      "target": "backend",
      "source": {
        "messageIds": [
          "recent-messages"
        ],
        "quotes": [
          "Yes add me as an admin",
          "If you want, I can make your current Internet Identity automatically added as an admin so you can enter the admin dashboard."
        ]
      },
      "acceptanceCriteria": [
        "When the user logs in with Internet Identity and then navigates to the admin section, the UI no longer shows “Access Denied”.",
        "Backend admin-gated endpoints (e.g., listing orders / updating order status) succeed for that identity after the bootstrap grant.",
        "The bootstrap behavior is safe against repeated use (e.g., only applies once, or only applies when no admin has been set yet), and does not allow arbitrary users to continually self-promote beyond the intended bootstrap rule.",
        "The existing authorization checks continue to be enforced for non-admin callers."
      ]
    }
  ],
  "constraints": [
    "Backend must remain a single Motoko actor in backend/main.mo.",
    "Only generate backend/migration.mo if required to preserve/upgrade existing persisted state."
  ],
  "nonGoals": [
    "Building a full admin user-management UI for adding/removing admins.",
    "Adding third-party authentication providers (only Internet Identity is used)."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}